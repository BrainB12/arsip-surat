{% extends "base.html" %}

{% block content %}
<h1 class="mt-3">Arsip Surat Kelurahan Karangduren</h1>
<p>Berikut ini adalah surat-surat yang telah diarsipkan.</p>

<div class="row mb-3">
    <div class="col-md-8">
        <form method="GET" action="{% url 'halaman_utama' %}" class="d-flex">
            <input type="text" name="q" class="form-control me-2" placeholder="Cari Judul Surat..." value="{{ request.GET.q|default:'' }}">
            <button type="submit" class="btn btn-primary">Cari</button>
        </form>
    </div>
    <div class="col-md-4 text-end">
        <a href="{% url 'arsipkan_surat' %}" class="btn btn-success">
            Arsipkan Surat..
        </a>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>No.</th>
                <th>Nomor Surat</th>
                <th>Kategori</th>
                <th>Judul Surat</th>
                <th>Waktu Pengarsipan</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            {% for surat in daftar_surat %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ surat.nomor_surat }}</td>
                    <td>{{ surat.kategori.nama }}</td>
                    <td>{{ surat.judul }}</td>
                    <td>{{ surat.waktu_pengarsipan|date:"d M Y, H:i" }}</td>
                    <td>
                        <a href="{% url 'unduh_surat' surat.pk %}" class="btn btn-sm btn-info text-white">Unduh</a>
                        
                        <a href="{% url 'lihat_surat' surat.pk %}" class="btn btn-sm btn-warning text-dark">Lihat >></a>
                        
                        <a href="{% url 'hapus_surat' surat.pk %}" class="btn btn-sm btn-danger">Hapus</a>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="6" class="text-center">Tidak ada data surat yang ditemukan.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}